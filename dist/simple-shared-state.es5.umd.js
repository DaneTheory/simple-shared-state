!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SimpleSharedState=n():t.SimpleSharedState=n()}(Function("return this")(),(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return(o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.r(n);var c=Object.getPrototypeOf({}),u=function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var u=o({},e),f=!1,s=new Map,l=new Map,p=new Set;if(this.watch=function(t,n){if("function"!=typeof t||"function"!=typeof n)throw new Error("selector and handler must be functions");if(s.has(t))throw new Error("Cannot reuse selector");var e;try{e=t(u)}catch(t){}return s.set(t,n),l.set(t,e),e},this.watchBatch=function(t,e){if(!t||"function"!=typeof t.forEach)throw new Error("selectors must be a list of functions");if("function"!=typeof e)throw new Error("handler is not a function");var r=[],o=0;t.forEach((function(t){if("function"!=typeof t)throw new Error("selector must be a function");var e=o++,i=n.watch(t,(function(t){return r[e]=t}));r[e]=i}));var i=function(){return e(r)};return n.watchDispatch(i),function(){return n.unwatchDispatch(i)}},this.watchDispatch=function(t){"function"==typeof t&&p.add(t)},this.unwatchDispatch=function(t){p.delete(t)},this.unwatch=function(t){s.delete(t),l.delete(t)},this.dispatch=function(t){if(f)throw new Error("can't dispatch while dispatching");if(!t||Object.getPrototypeOf(t)!==c)throw new Error("dispatch expects plain object");f=!0,s.forEach((function(n,e){var r;try{r=e(t)}catch(t){return}if(void 0!==r){var o=l.get(e);n(a(o,r))}})),a(u,t),f=!1,p.forEach((function(t){return t()}))},this.getState=function(){return o({},u)},r&&"function"==typeof r){var h=r((function(t){return t}));this.watch((function(t){return t}),h.dispatch)}},f=new Number(0),a=function t(n,e){return n&&e&&"object"===r(n)?(Object.keys(e).forEach((function(r){e[r]===f?delete n[r]:n[r]=t(n[r],e[r])})),n):e},s=function(t,n){var e=[];return e[t]=n,e};e.d(n,"createStore",(function(){return l})),e.d(n,"partialArray",(function(){return s})),e.d(n,"simpleMerge",(function(){return a})),e.d(n,"deleted",(function(){return f}));var l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new u(t,n)}}])}));