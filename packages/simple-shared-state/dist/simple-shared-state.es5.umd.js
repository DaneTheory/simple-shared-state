!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SimpleSharedState=n():t.SimpleSharedState=n()}(Function("return this")(),(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return(o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.r(n);var c=Object.getPrototypeOf({}),f=Array.isArray,u=function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0;i(this,t);var u,l=o({},e),d=!1,h=new Map,y=new Map,b=new Set,v=function(t){d=!0,l=o({},l),s(l,t),h.forEach((function(n,e){var r;try{if(void 0===(r=e(t)))return void e(l)}catch(t){}r===a&&(r=void 0);var o=y.get(e);if(r!==o){var i=s(o,r);y.set(e,i),n(i)}})),b.forEach((function(t){return t()})),d=!1};if(f&&f.connect&&"function"==typeof f.connect&&((u=f.connect()).subscribe((function(t){"DISPATCH"===t.type&&"JUMP_TO_STATE"===t.payload.type&&v(JSON.parse(t.state))})),u.init(l)),this.dispatch=function(t,e){if("string"!=typeof t)throw new Error("dispatch actionName must be a string");if(d)throw new Error("can't dispatch while dispatching");var r="function"==typeof e?e(n.getState()):e;if(!r||Object.getPrototypeOf(r)!==c)throw new Error("dispatch expects plain object");v(r),u&&u.send(t,n.getState())},this.watch=function(t,n){if("function"!=typeof t||"function"!=typeof n)throw new Error("selector and handler must be functions");if(h.has(t))throw new Error("Cannot reuse selector");var e;try{e=t(l)}catch(t){}return h.set(t,n),y.set(t,e),function(){h.delete(t),y.delete(t)}},this.watchBatch=function(t,e){if(!t||"function"!=typeof t.forEach)throw new Error("selectors must be a list of functions");if("function"!=typeof e)throw new Error("handler is not a function");var r=[],o=0,i=!1;t.forEach((function(e){if("function"!=typeof e)throw t.forEach((function(t){return h.delete(t)})),new Error("selector must be a function");var c=o++;try{r[c]=e(l)}catch(t){r[c]=void 0}n.watch(e,(function(t){r[c]=t,i=!0}))}));var c=function(){i&&(e(r.map(p)),i=!1)};return b.add(c),e(r.map(p)),function(){b.delete(c),t.forEach((function(t){return h.delete(t)}))}},this.watchDispatch=function(t){if("function"!=typeof t)throw new Error("handler must be a function");return b.add(t),function(){return b.delete(t)}},this.getState=function(t){if(t&&"function"==typeof t){var n;try{n=p(t(l))}catch(t){}return n}return o({},l)},this.actions={},r&&"function"==typeof r){var w=r(this);Object.keys(w).forEach((function(t){var e=u?"".concat(t,"()"):"";n.actions[t]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.dispatch(e,w[t].apply(null,o))}}))}},a=new Number,s=function t(n,e){return n&&e&&"object"===r(n)?(Object.keys(e).forEach((function(r){e[r]===a?delete n[r]:n[r]=t(n[r],e[r])})),n):e},l=function(t,n){var e=[];return e[t]=n,e};function p(t){return t&&"object"===r(t)?o(f(t)?[]:{},t):t}e.d(n,"createStore",(function(){return d})),e.d(n,"partialArray",(function(){return l})),e.d(n,"simpleMerge",(function(){return s})),e.d(n,"deleted",(function(){return a}));var d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new u(t,n,e)}}])}));